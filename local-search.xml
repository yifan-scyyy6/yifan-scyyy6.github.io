<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title></title>
    <link href="/2023/10/10/%E5%8D%97%E4%BA%AC20221002/"/>
    <url>/2023/10/10/%E5%8D%97%E4%BA%AC20221002/</url>
    
    <content type="html"><![CDATA[<hr><h2 id="title：南京20221002date：2023-10-09-20-00-00"><a href="#title：南京20221002date：2023-10-09-20-00-00" class="headerlink" title="title：南京20221002date：2023-10-09 20:00:00"></a>title：南京20221002<br>date：2023-10-09 20:00:00</h2><blockquote><p>2022年国庆假期，第二次去到南京，找好兄弟邵琦。本篇写于2022年10月9日，是几次南京之旅中最为详细的一篇。正好一周年整，便放上博客作为首发文章，特此纪念。</p></blockquote><p>又一次去到了南京。</p><p>在九月中旬的时候，就计划着趁国庆去旅行一趟，去一些远的地方。查询完无风险地区的城市后，觉得留给自己的选择是屈指可数。北京被当做了第一个选项。毕竟在这段时间，北京一定是个在疫情方面最安全的城市。结果杭州出现点情况，航班熔断到每日仅剩一班，连带着国庆的高铁票也是早就售罄。虽然去不成了，倒也不影响我感叹一下：“不愧是北京啊…”</p><p>9月24日晚上，想着离国庆节不远了，就问了邵琦他们的放假安排。</p><p>“就放三天。”邵琦回我。能出校，但不能在外过夜，不然按出市处理，回来一律隔离三天。稍微聊了几句后，也确定了他这个假期回不了杭州了。</p><p>“哈哈，那我可有理由来南京了，如果你有空的话。”我宽慰他。见一面，吃个饭，不过是地点从杭州换成了南京。</p><p>疫情三年，见机行事成了在很多事情上的处理原则。26号晚上，我订好车票与住宿，感叹道：“现在能否旅行一趟，多少有点成事在天的意味了”。然后我就开始听天由命。29号，南京出现了一例阳性。我实在不愿意放弃这次旅行，我跟自己说，要是30号再出病例，那我也认了，不去了；要是一切如常，那就好好享受这段旅程。所幸，截至1号中午，一切如常。我开始收拾行李。大概到这一刻，我的旅行才算是板上钉钉吧。</p><p>本想以极少的篇幅，把关于疫情的内容提一下，实在是有心无力。也许在这个时代，疫情所带来的种种遭遇，已经成为了旅行的一部分。</p><p>国庆的高铁票实在难买，早晨东站的车票全部售罄，好不容易有西站的车票，也是分两段买的。所幸两段的位置都靠窗。我喜欢看着窗外的景物接连着被向后抛去，就好像平日里的烦恼、压力等，一并抛走了。最终可以一身轻松的享受旅途。</p><p>10点34分，我还在溧水站，邵琦已经在南京南站等我了。我提前打个预防针：“那你可有的等了，估计我待会站核酸还得不少时间。”不料我一语成谶，南京南站要对所有外省人员统一核酸，又只开了3个核酸点，耗了我将近半个小时。邵琦都已经从南广场走到北广场，隔着围栏跟我打招呼了，我前面的核酸队伍还得再拐三个弯。想到我今年一月份来南京的时候，出站就看了个行程卡，几秒钟的事。除了叹口气好像也没什么方式能表达心情的了。</p><p>11点20分，随着我的手拍到邵琦的肩，我们总算成功汇合了。坐地铁去酒店放完行李已经十二点半了，就打算随便在附近吃点。酒店订在老城区的好处是，附近总会有一条充满烟火气的街道，两边开满了平价小店。这回的街，叫南昌路。</p><p>每人五个牛肉锅贴加一碗面，19块钱，我们对这南京第一餐非常满意。这家锅贴的皮是用小米粉发面做的，煎完后金黄，口感也更加酥脆。刚出锅的煎饺配着热面汤，吃得人额头冒汗。擦着汗又聊到，上次我俩在南京见面还是一月，正值寒冬，喝着热气升腾的鸭血粉丝汤，想借此暖暖身子。现在的我们只想来杯冰水解暑。</p><p>到了下马坊，古人或许在此下马，我们则是走下地铁，倒也有些应景。看着身边已经堵死的博爱路，我们决定徒步前往中山陵。不过半个小时，我们就看到了写着“国家重点风景名胜区——中山陵园风景区”的石碑。再往前，是写着“博爱”二字的牌坊，顶上的青蓝色瓦片亮的反光。</p><p>可能是边聊边走的缘故，所谓的三百九十二级台阶在不知不觉中已把我们送到了祭堂前。和每一位游客一样走完既定路线后，我俩找了处树荫歇脚。恢复下被这38度的气温蒸发的体力。</p><p> “你说，我们来这，为了什么呢？我来看这一处风景，为了什么呢？” 下山路上，邵琦突然问我。</p><p>我打趣他想的太复杂。接着我也被他带入了思考。</p><p>“可我来这，我总觉得需要告诉自己一个明确的意义，做什么事情都需要一个意义吧。”他补充道。</p><p>“意义么，看一些有特色的建筑。为你之后的设计师生涯铺垫一下吧。” </p><p>“嗯，挺好挺好。” 邵琦听完笑了笑。</p><p>“那张梦回九十年代的游客照，也挺有意义的对吧。”</p><p>“哈哈哈那确实。”这回笑的更明显些。</p><p>那张游客照是景区搞的活动，可以做成个钥匙扣。不仅是拍摄风格，连画质都糊成了九十年代的水平，看着挺有趣的。</p><p>关于“来这儿的意义是什么，旅行的意义又是什么？”不仅是下山时，在之后的旅途中，它都一直被思考着。</p><p>其实下山之后我们还去了美龄宫，但是人实在太多，破坏了建筑本身的意境。被人潮带着随波逐流，想在一处多驻足感受一会都很难实现。</p><p>从美龄宫走去地铁站的路上，沿着陵园路继续下山，两侧梧桐书笔直的，整齐的站在路边，也许是今年入秋晚，树叶仍选择以绿为主色调，我看着气温显示为36度的天气预报如是想着。等深秋了，几阵秋风后的这里应该会很美。</p><p>在节假日吃饭是件辛苦事。一直惦记着的南京大牌档排队到了两个小时以后，看着每家店门口一排排的人，我们晚饭的标准已经从“吃点特色”先变成了“吃点好的”，最后以“能吃就行”为妥协。在“能吃就行”原则指导下的我们，走进了路边的汤包店。带着误打误撞的成分体验了一下南京版“新丰小吃”——鸡鸣汤包。二十块钱六个鲜肉汤包加一碗面，我一定会记住这家位于汉中路129号的鸡鸣汤包店，它让两个不看攻略旅游的人在十一黄金周的晚上免于挨饿。</p><p>饭后老邵要搭地铁回学校。我就骑着车在南京城随意溜达，想在有限的时间里再多看一眼这里的街景。南京也是个适宜骑行的城市，坡路不多，也有独立的自行车道。骑得太开心了，回到酒店已经是十一点了。</p><p>旅馆对面的江西路，一整条街的两边全是早餐铺子。希望以后生活的地方，楼下也可以布满早餐铺子。在旅行的时候，喜欢沿着各种小路逛，偶尔会闪过“也许在这儿生活也挺不错”的念头。早饭是路边随便买的韭菜鸡蛋煎饼和豆浆，然后像这儿的绝大多数本地人一样，坐在路边的石墩子上，看着车流来来往往，却只想感叹“蛋饼真香”。</p><p>在等着与老邵汇合的时间里，骑车去逛了下广州路的先锋书店。这家用废弃地下停车场改造的独立书店，除了增添书架，几乎没有对原先的装修进行改动，以最朴素的装修给予文学以栖身之所。独立书店的魅力在于别出心裁的书籍分类，有时候一定的无序，可能更利于遇见意料之外的书籍，同时也为这种相遇染上了名为“缘分”的浪漫主义色彩。在信息茧房借力于大数据肆意裹挟思想的环境下，与不同文学作品的一次意外相遇好像是为茧房划开一刀，让思想得以喘息。</p><p>不凑巧的是，长假为这里输送了过量的打卡游客。游客来来往往，让这儿失去了书店独有的那份静谧。也许我需要再挑个清闲日子，再来好好的感受一下这家书店。一天对于旅行来说可以去到很多地方，但也许还不够认识一家书店。</p><p>鸡鸣寺出现在行程安排里，只是单纯的出于对佛教建筑的好奇。门票可以换三柱清香，可能算是给佛祖的见面礼，但是我无论如何都点不燃，只能依靠邵琦帮忙。我自知不是虔诚的佛教徒，觉得自然也不应当向佛祖祈求些什么。</p><p>离开鸡鸣寺后，觉得午饭时间还早，就沿着城墙一直走。一路上聊着生活琐事，聊到疫情与封校，进而提到翻墙与钻洞。恰好看见城墙根下某处填着一块石头，邵琦说：“这会不会就是古代的某个地洞呢？”我听完一笑，随手拍了张照。如果几十年后的我恰好有机会再路过这儿，我会想起这一天，这个人，这段对话吗？旅行于我而言的其中一个意义，是在某处留下记忆的碎片，等待着未来某天再去拾起。</p><p>午饭在东南大学四牌楼校区附近吃的，感叹一下，学生街的物价果然实惠。</p><p>十月三日当天下午还是38度的气温，实在是不想再去景点了。纵使对于南京我还有太多想去的地方，恐怕欣赏一事暂时是有心无力了。于是邵琦提出早点去他学校附近逛逛。这次我们特意选了公交，中途还换了一班车，多花了大半个小时，就为了能欣赏一下南京的街景，顺便跨过长江大桥。跨江的时候想起今年一月份来南京，背着十公斤的行李包，骑着共享单车过南京长江大桥。下回要是再有机会跨江，也许能回忆的趣事又增加了。比如由于我沉浸在拍摄江景的快乐中，邵琦却因为没人与他聊天，过于无聊，车又晃晃悠悠的很舒适，几乎睡了一路。他是这么说的，虽然我觉得这车反而晃得我特别清醒。</p><p>走在南京工业大学附近的路上，会忍不住的想：邵琦平时经过这条路的时候会是什么心情呢？会想过能有一天和老朋友在这条路上随心所欲地畅聊吗？与高中的朋友走在大学的路上，也许会让时间短暂的失去它的意义。</p><p>就像最初计划好的那样，在南京的最后一餐选在了邵琦的学校边上，这样我们也可以尽量聊得多些，聊得晚些，不必担心回去错过了门禁。也幸好是在浦口这边，人不如市中心的商圈那么多，我终于吃上了惦记已久的南京大牌档。运气很好的在吃饭时恰逢店内表演，能够听上一曲苏州评弹，作为我能大致听懂的两种戏曲之一，实在是为这顿饭增加了太多乐趣。至于菜的味道如何，要细说肯定是会被篇幅受限。概括一下就是，桂花年糕真好吃，盐水鸭很下饭，又多了一个来南京的理由。</p><p>聊得多自然吃得慢，没想到吃完已经接近七点半了。邵琦把我送去南工大地铁站，路上说：“我从学校出来去地铁站，就是走的这条路，每次回家都是，一月份来陪你玩也是。”突然觉得在异乡的时候能有这样一条路也挺棒的，上面铺满回忆。</p><p>等我回到杭州，做完核酸与外省行程流调，坐上回家的地铁已经是晚上十点五十。我给邵琦报了个平安。他回我说，旅途辛苦，记得早点休息。我说，还好，见一面，吃个饭，玩几天，不过是地点从杭州换成了南京。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>本地复现 TCResNet8 模型的训练算法</title>
    <link href="/2023/10/05/%E6%9C%AC%E5%9C%B0%E5%A4%8D%E7%8E%B0%20TCResNet8%20%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%AE%AD%E7%BB%83%E7%AE%97%E6%B3%95/"/>
    <url>/2023/10/05/%E6%9C%AC%E5%9C%B0%E5%A4%8D%E7%8E%B0%20TCResNet8%20%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%AE%AD%E7%BB%83%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h3 id="本地复现-TCResNet8-模型的训练算法"><a href="#本地复现-TCResNet8-模型的训练算法" class="headerlink" title="本地复现 TCResNet8 模型的训练算法"></a>本地复现 TCResNet8 模型的训练算法</h3><h4 id="0-模型来源"><a href="#0-模型来源" class="headerlink" title="0. 模型来源"></a>0. 模型来源</h4><p>文章标题：Temporal Convolution for Real-time Keyword Spotting on Mobile Devices</p><p>项目地址：<a href="https://github.com/hyperconnect/TC-ResNet">https://github.com/hyperconnect/TC-ResNet</a></p><h4 id="1-环境搭建"><a href="#1-环境搭建" class="headerlink" title="1. 环境搭建"></a>1. 环境搭建</h4><p>项目中的Markdown文件已经写的较为清楚。这里再补充一点，因为原项目是在Linux系统下运行的，使用Windows系统的用户，建议先安装 Windows Subsystem for Linux (WSL)，再在Linux下运行本项目。</p><p>否则可能出现如下警告：</p><blockquote><p>WSL is not installed, so could not detect WSL profiles.</p></blockquote><p>WSL安装教程（Microsoft官方）：<a href="https://learn.microsoft.com/en-us/windows/wsl/install">https://learn.microsoft.com/en-us/windows/wsl/install</a></p><h4 id="2-调试运行"><a href="#2-调试运行" class="headerlink" title="2. 调试运行"></a>2. 调试运行</h4><p>调试步骤在Markdown文件内已经写的较为清楚。这里补充一些细节并修正一些错误。</p><h5 id="2-1-To-train-TCResNet8Model-1-0-model"><a href="#2-1-To-train-TCResNet8Model-1-0-model" class="headerlink" title="2.1 To train TCResNet8Model-1.0 model"></a>2.1 To train TCResNet8Model-1.0 model</h5><p>run:</p><blockquote><p>.&#x2F;scripts&#x2F;commands&#x2F;TCResNet8Model-1.0_mfcc_40_3010_0.001_mom_l1.sh</p></blockquote><p>在执行此指令之前，需要将所用的dataset下载到 <code>TC-ResNet</code> 文件夹下。并执行split此dataset的.sh文件。</p><blockquote><p>.&#x2F;speech_commands_dataset&#x2F;download_and_split.sh</p></blockquote><p>有可能因为权限不够出现报错：</p><blockquote><p>Permission denied</p></blockquote><p>可以输入如下指令获取权限后再次执行：</p><blockquote><p>sudo chmod -R 777 *</p><p>-R 所执行目录下的所有子目录与文件</p><p>777 给予用户最高权限</p><p>* 指定执行目录，*为执行当前路径</p></blockquote><p>若成功执行本节（2.1）开头的指令，即开始训练模型。</p><p>关于训练模式，在论文3.1节中的Training部分有详细介绍。</p><p>简述：共30k循环，每0.5k次记录一次performance。</p><p>可能出现如下报错：</p><blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;evaluate_audio.py&quot;</span>, line <span class="hljs-number">87</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>  main(args)<br>  File <span class="hljs-string">&quot;evaluate_audio.py&quot;</span>, line <span class="hljs-number">28</span>, <span class="hljs-keyword">in</span> main<br>  is_training,<br>  File <span class="hljs-string">&quot;/home/yifan/TC-ResNet/datasets/audio_data_wrapper.py&quot;</span>, line <span class="hljs-number">15</span>, <span class="hljs-keyword">in</span> \__init__<br>  self.setup()<br>  File <span class="hljs-string">&quot;/home/yifan/TC-ResNet/datasets/audio_data_wrapper.py&quot;</span>, line <span class="hljs-number">126</span>, <span class="hljs-keyword">in</span> setup<br>  <span class="hljs-keyword">assert</span> self.args.num_classes == self.num_labels<br>AssertionError<br></code></pre></td></tr></table></figure></blockquote><p>此处提示dataset的label数量与模型输出的分类数不一致，由dataset路径错误导致。未能使程序正确找到dataset并获取其中的label信息。</p><p>打开<code>TCResNet8Model-1.0_mfcc_40_3010_0.001_mom_l1.sh</code></p><p><img src="/img/1-1.PNG" alt="1-1"></p><p>将 <em>dataset_path</em> 修改为split后的dataset所在路径。建议使用绝对路径。</p><h5 id="2-2-To-freeze-the-trained-model-checkpoint-into-pb-file"><a href="#2-2-To-freeze-the-trained-model-checkpoint-into-pb-file" class="headerlink" title="2.2 To freeze the trained model checkpoint into .pb file"></a>2.2 To freeze the trained model checkpoint into <code>.pb</code> file</h5><p>run:</p><blockquote><p>python freeze.py –checkpoint_path work&#x2F;v1&#x2F;TCResNet8Model-1.0&#x2F;mfcc_40_3010_0.001_mom_l1&#x2F;TCResNet8Model-XXX –output_name output&#x2F;softmax –output_type softmax –preprocess_method no_preprocessing –height 49 –width 40 –channels 1 –num_classes 12 TCResNet8Model –width_multiplier 1.0</p></blockquote><p>此指令有误。直接运行会报错，提示缺少preprocess_method，height，width 和 channels 参数（事实上已传入）。</p><p>修改如下：</p><blockquote><p>python freeze.py –num_classes 12 –checkpoint_path work&#x2F;v1&#x2F;TCResNet8Model-1.0&#x2F;mfcc_40_3010_0.001_mom_l1&#x2F;TCResNet8Model-XXX –output_name softmax  –preprocess_method no_preprocessing –height 49 –width 40 –channels 1 TCResNet8Model –width_multiplier 1.0 </p><p>XXX 输入产生该份数据的迭代次数（完整运行则为30000）</p></blockquote><h5 id="2-3-To-convert-the-pb-file-into-tflite-file"><a href="#2-3-To-convert-the-pb-file-into-tflite-file" class="headerlink" title="2.3 To convert the .pb file into .tflite file"></a>2.3 To convert the <code>.pb</code> file into <code>.tflite</code> file</h5><p>run:</p><blockquote><p>tflite_convert –graph_def_file&#x3D;work&#x2F;v1&#x2F;TCResNet8Model-1.0&#x2F;mfcc_40_3010_0.001_mom_l1&#x2F;TCResNet8Model-XXX.pb –input_format&#x3D;TENSORFLOW_GRAPHDEF –output_format&#x3D;TFLITE –output_file&#x3D;work&#x2F;v1&#x2F;TCResNet8Model-1.0&#x2F;mfcc_40_3010_0.001_mom_l1&#x2F;TCResNet8Model-XXX.tflite –inference_type&#x3D;FLOAT –inference_input_type&#x3D;FLOAT –input_arrays&#x3D;input –output_arrays&#x3D;output&#x2F;softmax –allow_custom_ops</p></blockquote><p>同样改句指令也有误，修改为：</p><blockquote><p>tflite_convert –graph_def_file&#x3D;work&#x2F;v1&#x2F;TCResNet8Model-1.0&#x2F;mfcc_40_3010_0.001_mom_l1&#x2F;TCResNet8Model-XXX.pb –input_format&#x3D;TENSORFLOW_GRAPHDEF –output_format&#x3D;TFLITE –output_file&#x3D;work&#x2F;v1&#x2F;TCResNet8Model-1.0&#x2F;mfcc_40_3010_0.001_mom_l1&#x2F;TCResNet8Model-XXX.tflite –inference_type&#x3D;FLOAT –inference_input_type&#x3D;FLOAT –input_arrays&#x3D;input –output_arrays&#x3D;softmax –allow_custom_ops</p><p>XXX 输入产生该份数据的迭代次数（完整运行则为30000）</p></blockquote><p>至此，得到<code>.pb</code> 与 <code>.tflite</code>两份文件，TCResNet8 模型训练部分算法复现结束。</p><h4 id="3-参考资料"><a href="#3-参考资料" class="headerlink" title="3. 参考资料"></a>3. 参考资料</h4><p><a href="https://github.com/hyperconnect/TC-ResNet/issues/12">Generate pb file command is error · Issue #12 · hyperconnect&#x2F;TC-ResNet (github.com)</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>关于博客</title>
    <link href="/2023/10/04/%E5%85%B3%E4%BA%8E%E5%8D%9A%E5%AE%A2/"/>
    <url>/2023/10/04/%E5%85%B3%E4%BA%8E%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<p>一直想找一个空间，放一些平时写的各种随笔。之前的微信朋友圈承担着这份工作，只是碍于账号里加的人越来越多，泛泛之交的人也越来越多，不喜欢在那样的环境下表达，只好选择把所思所想默默地收进手机备忘录里。</p><p>我是个矛盾的人。不喜欢表达自己，却想把一切所思所想都分享给朋友们。前天晚上和Lingkang（令糠）聊天的时候恰好看到了他的博客，对这东西有种相见恨晚的感觉。2023年10月3日这天，正好我下午没课，花了半天时间调用框架再做些美化，这个博客就这么诞生了。</p><p>学习是生活的一部分，旅行是生活的一部分，所有看起来稀松平常的经历自然也是生活的一部分。没有什么太固定的主题，任何与生活相关的思考和感悟大概都会出现在这个博客里。那些散落在我微信朋友圈和手机备忘录各处的随笔，大概都会出现在这个博客里。</p><p>“用书写抵抗遗忘。”朋友寄给我的明信片上这样写着。不过我认为写作的目的不仅为了留住过去，也在审视当下。</p><p>最后，欢迎来到Yifan（逸凡）的博客，希望你读的开心。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>测试笔记</title>
    <link href="/2023/10/03/first/"/>
    <url>/2023/10/03/first/</url>
    
    <content type="html"><![CDATA[<p>这是一篇测试笔记。</p><p>现在是2023年10月3日，21点37分（UTC+1）。</p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
